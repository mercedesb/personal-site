<!DOCTYPE html><html><head><script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-121177820-1"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-121177820-1');</script><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link href="/static/css/app.d891e5fc5dac5da8bde8627887e4cc66.css" rel="stylesheet"><title>Epi Initialization Modules: A Practical Guide | Mercedes Bernard</title><meta name="twitter:card" data-vmid="twitter:card" content="summary" data-vue-meta="true"><meta name="twitter:site" data-vmid="twitter:site" content="@mercedescodes" data-vue-meta="true"><meta name="twitter:creator" data-vmid="twitter:creator" content="@mercedescodes" data-vue-meta="true"><meta property="og:type" data-vmid="og:type" content="article" data-vue-meta="true"><meta property="og:site_name" data-vmid="og:site_name" content="Mercedes Bernard" data-vue-meta="true"><meta name="description" data-vmid="description" content="" data-vue-meta="true"><meta name="twitter:description" data-vmid="twitter:description" content="" data-vue-meta="true"><meta property="og:url" data-vmid="og:url" content="http://www.mercedesbernard.com/blog/epi-initialization-modules" data-vue-meta="true"><meta property="og:description" data-vmid="og:description" content="" data-vue-meta="true"><meta name="og:title" data-vmid="og:title" content="Epi Initialization Modules: A Practical Guide" data-vue-meta="true"><meta name="twitter:title" data-vmid="twitter:title" content="Epi Initialization Modules: A Practical Guide" data-vue-meta="true"><meta property="og:title" data-vmid="og:title" content="Epi Initialization Modules: A Practical Guide" data-vue-meta="true"></head><body><div id="app"><div class="ContentLayout"><main class="BlogPost" urlsegment="epi-initialization-modules"><header data-v-828d61ec="" class="PageHeader PageHeader--purple PageHeader--short"><!----> <div data-v-828d61ec="" class="PageHeader-text"><div data-v-828d61ec="" class="PageHeader-decorativeHeader"><h2 data-v-828d61ec="">Mar 31 2015</h2></div> <div data-v-828d61ec="" class="PageHeader-titleHeader"><h1 data-v-828d61ec="">Epi Initialization Modules: A Practical Guide</h1></div></div> <nav data-v-828d61ec="" class="Navigation"><ul class="Navigation-navLinks"><li class="Navigation-navLink"><div><a href="/" class="router-link-active"><div class="Navigation-title"><span>Home</span></div> <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTU0cHgiIGhlaWdodD0iMTUzcHgiIHZpZXdCb3g9IjAgMCAxNTQgMTUzIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0OS4xICg1MTE0NykgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+R3JvdXAgNDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJSZXNvdXJjZS1TZXQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJHcm91cC00IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjAwMDAwMCwgMi4wMDAwMDApIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMSI+CiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJQYXRoLTE0IiBwb2ludHM9IjE4LjY3ODM0MDMgMTQ5LjkwNjYxOSAxOC42NzgzNDAzIDY4LjQwNDg1MzYgMTMxLjMyNTU5MSA2OC40MDQ4NTM2IDEzMS4zMjU1OTEgMTQ5LjkwNjYxOSI+PC9wb2x5Z29uPgogICAgICAgICAgICA8cG9seWxpbmUgaWQ9IlBhdGgtMTUiIHBvaW50cz0iNTYuMTM2MjEwOSAxNDkuOTA2NjE5IDU2LjEzNjIxMDkgMTEzLjM5NTkyMyA4Ny45ODY1MzAyIDExMy4zOTU5MjMgODcuOTg2NTMwMiAxNDkuOTA2NjE5Ij48L3BvbHlsaW5lPgogICAgICAgICAgICA8cG9seWxpbmUgaWQ9IlBhdGgtMTYiIHBvaW50cz0iNTYuMTM2MjEwOSAxMTMuNTgzMDA0IDU2LjEzNjIxMDkgMTAxLjczMDUzMiA4Ny45ODY1MzAyIDEwMS43MzA1MzIgODcuOTg2NTMwMiAxMTMuNTgzMDA0Ij48L3BvbHlsaW5lPgogICAgICAgICAgICA8cG9seWdvbiBpZD0iUGF0aC0xOCIgcG9pbnRzPSIxOC43MjE5MjQgNjguNDQwNTUwMyA3NS4wOTcxNTY2IDEzLjAxMTk5NjIgMTMxLjQ3MjM4OSA2OC40NDA1NTAzIj48L3BvbHlnb24+CiAgICAgICAgICAgIDxwb2x5bGluZSBpZD0iUGF0aC0yMCIgcG9pbnRzPSIxOC43OTA4MTY5IDY4LjQzMjIwMDMgOS4xMjc1MzI5MiA3OC40ODY3NDA2IDAuMDAzNTIwMTgwOTcgNzEuMjAzNzQ5NiA3NS40MzY4NDAzIDAuMDc5OTk5ODY3MiAxNDkuOTU1Nzc0IDcxLjIwMzc0OTYgMTQwLjc4NjA4NiA3OC40ODY3NDA2IDEzMS40MTQ2NTEgNjguNDMyMjAwMyI+PC9wb2x5bGluZT4KICAgICAgICAgICAgPGNpcmNsZSBpZD0iT3ZhbC02IiBjeD0iMTA5LjkwMDU5MiIgY3k9IjkxLjQ3NjQ0MiIgcj0iMi44MjM1Mjk0MSI+PC9jaXJjbGU+CiAgICAgICAgICAgIDxjaXJjbGUgaWQ9Ik92YWwtNiIgY3g9Ijk5LjYyNzE4MjQiIGN5PSI5MS40NzY0NDIiIHI9IjIuODIzNTI5NDEiPjwvY2lyY2xlPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsLTYiIGN4PSI1OS4xMDE1MzEiIGN5PSIxMzUuNjQ2NzczIiByPSIxIj48L2NpcmNsZT4KICAgICAgICAgICAgPGNpcmNsZSBpZD0iT3ZhbC02IiBjeD0iMTIwLjE3NTEyOCIgY3k9IjkxLjQ3NjQ0MiIgcj0iMi44MjM1Mjk0MSI+PC9jaXJjbGU+CiAgICAgICAgICAgIDxwb2x5bGluZSBpZD0iUGF0aC0yMSIgcG9pbnRzPSIxMTkuNDg3NjU0IDQyLjE4Mjg5NTMgMTE5LjQ4NzY1NCAxOS4yNDkxNDE4IDEzMC41OTA0NDIgMTkuMjQ5MTQxOCAxMzAuNTkwNDQyIDUyLjc3MzAwNTYiPjwvcG9seWxpbmU+CiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJQYXRoLTE5IiBwb2ludHM9IjY1LjI5NjgwMzcgNDAuOTU4NzM3OSA2NS4yOTY4MDM3IDYwLjAxNzU2MTQgODQuMzU1NjI3MiA2MC4wMTc1NjE0IDg0LjM1NTYyNzIgNDAuOTU4NzM3OSI+PC9wb2x5Z29uPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+" class="Navigation-icon"></a> <!----></div></li> <li class="Navigation-navLink"><div><a href="/about" class=""><div class="Navigation-title"><span>About</span></div> <img src="//images.ctfassets.net/kueynwv98jit/2LWqdeu7xCw0uyqKUmkAOA/3045b0e74b2f9d88e504ac7309a98c9f/AboutIcon.svg" class="Navigation-icon"></a> <!----></div></li><li class="Navigation-navLink"><div><a href="/connect" class=""><div class="Navigation-title"><span>Connect</span></div> <img src="//images.ctfassets.net/kueynwv98jit/1rTlONw1hmcCQaWmk60g8a/fafe83d4b36be54929c683fff763b5ea/ConnectIcon.svg" class="Navigation-icon"></a> <!----></div></li><li class="Navigation-navLink"><div><a href="/blog" class="router-link-active"><div class="Navigation-title"><span>Blog</span></div> <img src="//images.ctfassets.net/kueynwv98jit/3HoJpizH9ewWec80OyyYqo/7370fbd9da0ca8bd4ebde5a063b9c579/BlogIcon.svg" class="Navigation-icon"></a> <!----></div></li><li class="Navigation-navLink"><div><!----> <a href="https://www.etsy.com/shop/blinddogyarns?ref=mercedesbernard" target="_blank"><div class="Navigation-title"><span>Shop</span></div> <img src="//images.ctfassets.net/kueynwv98jit/5PDAZgLTjiuC2Ka44u68qY/1986ce98446ee47a7fadf1e3972f6bac/ShopIcon.svg" class="Navigation-icon"></a></div></li></ul></nav></header> <div class="BlogPost-content"><div class="PageContent"><div class="Markdown"><p><em>This post originally appeared on the <a href="http://blog.nansen.com/2015/03/epi-initialization-modules-practical.html">Nansen blog</a></em></p>
<p>If you've been working with EPi 7 or 7.5 (or even 8 for you early adopters), you've most likely created an initialization module.  For a thorough introduction, <a href="https://world.episerver.com/documentation/Items/Developers-Guide/EPiServer-CMS/75/Initialization/Initialization/">this link</a> is a good resource. While they are really extensible, I've run into a few hiccups during development and would like to share some (hopefully) time saving tips.</p>
<h4>Debugging</h4>
<p>Debugging has proven to be quite a headache for me whenever I create an initialization module since I don't do it very often and always forget how I was able to do it the last time. Since you need to be attached to the debugger while the site is initializing, many common forms of debugging don't work very well (if you are using traditional IIS and not IIS Express). I've seen a couple blog posts on this topic, but none have worked for me (because it's for an older version of EPi or because it recycles the whole app pool).</p>
<p>Here is the easiest way I've found to quickly and easily debug my initialization modules:</p>
<ol>
<li>In your Initialization module, add this line where you would like the debugger to break</li>
</ol>
<p><code>System.Diagnostics.Debugger.Break();</code></p>
<ol start="2">
<li>Using Visual Studio's Debug &gt; Attach to Process menu, attach to all of the w3wp processes.  This makes sure that you are still attached to the process running the initialization even when you restart the site in the next step.</li>
</ol>
<p><img src="//images.ctfassets.net/kueynwv98jit/5k2YkmwXVCcuQ0CeWQcEmU/8b231183d6378e29e77c423a56bf2b29/EpiInitModules_1.png" alt="EpiInitModules 1"></p>
<ol start="3">
<li>In IIS, restart the website you'd like to initialize</li>
</ol>
<p><img src="//images.ctfassets.net/kueynwv98jit/2acCIIV6HqEYoAGQy2uMIO/9cdfe1dc839eda720d3afffc93f6f35d/EpiInitModules_2.png" alt="EpiInitModules 2"></p>
<p>You should see your break point hit and be able to debug your initialization module now.  If you know a better way to accomplish this, please let me know in the comments! This has been the simplest solution I've found.</p>
<h4>InitComplete</h4>
<p>In EPi's documentation, they mention that the InitComplete event's "typical use case (also featured in EPiServer Community) is to attach event handlers to an instance property that may be overridden by third-party code."</p>
<p>Another use case for InitComplete is if you need to access the Start page of your site or any other site specific properties.  These are only available after the site has been initialized.</p>
<p>One "gotcha" to keep in mind, is that you must have the wild card site binding in order for the initialization module to properly find your Start Page.  Otherwise, <code>ContentReference.StartPage</code> returns an empty content reference.</p>
<p><img src="//images.ctfassets.net/kueynwv98jit/2rAzbbD1IIySIWEu2Y6CoK/cb796ca855c579d7b1d686c584598e87/EpiInitModules_3.png" alt="EpiInitModules 3"></p>
<p>Do you know of any other tips when developing initialization modules? Let me know!</p>
</div> <br> <p class="BlogPost-publishDate"><em>Published Mar 31 2015</em></p></div></div></main></div></div><script type="text/javascript" src="/static/js/manifest.2ae2e69a05c33dfc65f8.js"></script><script type="text/javascript" src="/static/js/vendor.bdfbbe384b0395b368c1.js"></script><script type="text/javascript" src="/static/js/app.6b636277d4acc4363092.js"></script></body></html>